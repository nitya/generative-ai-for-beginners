
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Multi-part curriculum teaching Generative AI from concepts to code">
      
      
        <meta name="author" content="AI Advocacy">
      
      
        <link rel="canonical" href="https://nitya.github.io/generative-ai-for-beginners/06-text-generation-apps/translations/cn/">
      
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.45">
    
    
      
        <title>第六章：创建文本生成应用 - Generative AI For Beginners</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Generative AI For Beginners" class="md-header__button md-logo" aria-label="Generative AI For Beginners" data-md-component="logo">
      
  <img src="../../../img/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Generative AI For Beginners
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              第六章：创建文本生成应用
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="pink"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 2c-1.82 0-3.53.5-5 1.35C8 5.08 10 8.3 10 12s-2 6.92-5 8.65C6.47 21.5 8.18 22 10 22a10 10 0 0 0 10-10A10 10 0 0 0 10 2"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="amber" data-md-color-accent="cyan"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/microsoft/generative-ai-for-beginners" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    microsoft/generative-ai-for-beginners
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  Welcome

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../00-course-setup/" class="md-tabs__link">
          
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../01-introduction-to-genai/" class="md-tabs__link">
          
  
  Lessons

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Generative AI For Beginners" class="md-nav__button md-logo" aria-label="Generative AI For Beginners" data-md-component="logo">
      
  <img src="../../../img/logo.svg" alt="logo">

    </a>
    Generative AI For Beginners
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/microsoft/generative-ai-for-beginners" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    microsoft/generative-ai-for-beginners
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../00-course-setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../00-course-setup/SETUP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setup
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Lessons
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Lessons
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../01-introduction-to-genai/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../02-exploring-and-comparing-different-llms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Compare LLMs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../03-using-generative-ai-responsibly/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Responsible AI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../04-prompt-engineering-fundamentals/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Prompt Engineering
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../05-advanced-prompts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. Advanced Prompts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. Text Generation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../07-building-chat-applications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7. Chat Applications
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../08-building-search-applications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8. Search Applications
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../09-building-image-applications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9. Image Applications
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../10-building-low-code-ai-applications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10. Low Code Applications
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Integrating with11-integrating-with-function-calling/README.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    11. Function Calling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../12-designing-ux-for-ai-applications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    12. Designing UX for AI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../13-securing-ai-applications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    13. Securing AI Applications
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../14-the-generative-ai-application-lifecycle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    14. Generative AI App Lifecycle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../15-rag-and-vector-databases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    15. RAG and Vector Databases
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../16-open-source-models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    16. Open Source Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../17-ai-agents/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    17. AI Agents
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../18-fine-tuning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    18. Fine Tuning
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../19-slm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    19. Small Language Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../20-mistral/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    20. Mistral
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../21-meta/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    21. Meta
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      本章概述
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      学习目标
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      什么是文本生成应用
    </span>
  </a>
  
    <nav class="md-nav" aria-label="什么是文本生成应用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ui" class="md-nav__link">
    <span class="md-ellipsis">
      传统控制台和 UI 应用程序的局限性
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      文本生成应用程序的优势
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      使用文本生成应用程序构建什么？
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      如何入门？
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#librariessdks" class="md-nav__link">
    <span class="md-ellipsis">
      Libraries/SDKs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openai" class="md-nav__link">
    <span class="md-ellipsis">
      人生中第一个 openai 应用
    </span>
  </a>
  
    <nav class="md-nav" aria-label="人生中第一个 openai 应用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#openai_1" class="md-nav__link">
    <span class="md-ellipsis">
      安装 openai
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      创建资源
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-key-and-endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      添加 API key and endpoint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azure" class="md-nav__link">
    <span class="md-ellipsis">
      配置 Azure 环境
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      文字生成
    </span>
  </a>
  
    <nav class="md-nav" aria-label="文字生成">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      聊天补全
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#-" class="md-nav__link">
    <span class="md-ellipsis">
      练习 - 您的人生中首个文本生成应用
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      不同类型的提示，针对不同的事情
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      进阶学习：菜谱生成器
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#-_1" class="md-nav__link">
    <span class="md-ellipsis">
      实战 - 打造一个菜谱生成器
    </span>
  </a>
  
    <nav class="md-nav" aria-label="实战 - 打造一个菜谱生成器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      通过添加过滤器和购物清单进行改进
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      改进您的设置
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      作业
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      解决方案
    </span>
  </a>
  
    <nav class="md-nav" aria-label="解决方案">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      学习伙伴
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      历史机器人
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      知识检查
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      🚀 知识拓展
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      继续学习
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="_1">第六章：创建文本生成应用<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<p><a href="https://aka.ms/gen-ai-lesson6-gh?WT.mc_id=academic-105485-koreyst"><img alt="Building Text Generation Applications" src="../../images/06-lesson-banner.png?WT.mc_id=academic-105485-koreyst" /></a></p>
<blockquote>
<p><em>(点击该图片看本章导学视频)</em></p>
</blockquote>
<p>到目前为止，您已经通过本系列课程看到了如提示之类的核心概念，甚至是称为“提示工程”的整个学科。 您可以与通过使用如 ChatGPT、Office 365、Microsoft Power Platform 等工具结合提示来完成某些工作任务。</p>
<p>为了将这样的体验添加到应用程序中，您需要了解提示、补全等概念并选择要使用的相关库。 这正是您将在本章中学到的内容。</p>
<h2 id="_2">本章概述<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p>在本章中，您将学习到：</p>
<ul>
<li>了解 openai 库及其核心概念。</li>
<li>使用 openai 构建文本生成应用程序。</li>
<li>了解如何使用提示、temperature 和 tokens 等概念来构建文本生成应用程序。</li>
</ul>
<h2 id="_3">学习目标<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<p>在完成本章的学习，您将能够：</p>
<ul>
<li>解释什么是文本生成应用程序。</li>
<li>使用 openai 构建文本生成应用程序。</li>
<li>配置您的应用程序以使用更多或更少的 tokens，并更改 temperature，以获得不同的输出。</li>
</ul>
<h2 id="_4">什么是文本生成应用<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<p>一般来说当您构建应用程序时，它具有某种界面，如下所示：</p>
<ul>
<li>基于命令。 控制台应用程序是典型的应用程序，您可以在其中键入命令并执行任务。 例如，“git”是一个基于命令的应用程序。</li>
<li>用户界面（UI）。 某些应用程序具有图形用户界面 (GUI)，您可以在其中单击按钮、输入文本、选择选项等。</li>
</ul>
<h3 id="ui">传统控制台和 UI 应用程序的局限性<a class="headerlink" href="#ui" title="Permanent link">&para;</a></h3>
<p>将其与输入命令的传统应用程序进行比较：</p>
<ul>
<li><strong>存在局限性</strong>。 您不能输入任意命令，只能键入该应用程序支持的命令。</li>
<li><strong>特定于某种语言</strong>。 某些应用程序支持多种语言，但默认情况下，即使可以添加更多语言支持，该应用程序也是针对有限的语言构建的。</li>
</ul>
<h3 id="_5">文本生成应用程序的优势<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<p>文本生成应用程序有何不同呢？</p>
<p>在文本生成应用程序中，您拥有更大的灵活性，不再局限于一组特定的命令或特定的输入语言。 相反，您可以使用自然语言与应用程序交互。 另一个好处是，因为您已经在与经过大量信息库训练的数据源进行交互，而传统应用程序可能仅限于在数据库中存储的有限内容。</p>
<h3 id="_6">使用文本生成应用程序构建什么？<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<p>您可以创建很多东西。 例如：</p>
<ul>
<li><strong>聊天机器人</strong> 回答有关您的公司及其产品等主题的问题的聊天机器人可能是一个不错的选择。</li>
<li><strong>协同助手</strong> LLMs 擅长总结文本、从文本中获取见解、生成简历等文本等。</li>
<li><strong>代码助手</strong> 根据您使用的编程语言模型，您可以构建一个代码助手来帮助您编写代码。 例如，您可以使用 GitHub Copilot 和 ChatGPT 等产品来帮助您编写代码。</li>
</ul>
<h2 id="_7">如何入门？<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h2>
<p>您需要找到一种与 LLMs 结合的方法，通常使用以下两种方法：</p>
<ul>
<li>使用 API，您将根据提示构建 Web 请求并返回生成的文本。</li>
<li>使用库，库有助于封装 API 调用，使其更易于使用。</li>
</ul>
<h2 id="librariessdks">Libraries/SDKs<a class="headerlink" href="#librariessdks" title="Permanent link">&para;</a></h2>
<p>有一些比较通用的与 LLMs 整合的 librarys，例如：</p>
<ul>
<li><strong>openai</strong>，这个 librarys 可以轻松连接到您的模型并发送提示。</li>
</ul>
<p>还有一些在更高级别的框架运行的 librarys，例如：</p>
<ul>
<li><strong>Langchain</strong>。 Langchain 支持 Python 比较通用的 library</li>
<li><strong>Semantic Kernel</strong>。 Semantic Kernel 是 Microsoft 提供的一个 library，支持 C#、Python 和 Java 语言。</li>
</ul>
<h2 id="openai">人生中第一个 openai 应用<a class="headerlink" href="#openai" title="Permanent link">&para;</a></h2>
<p>让我们看看如何构建人生中第一个 openai 应用，我们需要哪些 libraries，需要多少技能等等。</p>
<h3 id="openai_1">安装 openai<a class="headerlink" href="#openai_1" title="Permanent link">&para;</a></h3>
<p>有许多库可用于与 OpenAI 或 Azure OpenAI 交互。 还可以使用不同的编程语言，如 C#、Python、JavaScript、Java 等。 我们选择使用 <code>openai</code> Python 库，通过 <code>pip</code> 来安装它。</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>openai
</code></pre></div></td></tr></table></div>
<h3 id="_8">创建资源<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<p>您需要执行以下步骤：</p>
<ul>
<li>在 Azure <a href="https://azure.microsoft.com/free/?WT.mc_id=academic-105485-koreyst">https://azure.microsoft.com/free/</a> 上创建帐户。</li>
<li>访问 Azure Open AI。 进入到 <a href="https://learn.microsoft.com/azure/ai-services/openai/overview#how-do-i-get-access-to-azure-openai?WT.mc_id=academic-105485-koreyst">https://learn.microsoft.com/azure/ai-services/openai/overview#how-do-i-get-access-to-azure-openai</a> 并请求访问权限。</li>
</ul>
<blockquote>
<p>[!注意]
您需要申请访问 Azure Open AI Service 的访问。</p>
</blockquote>
<ul>
<li>安装 Python <a href="https://www.python.org/">https://www.python.org/</a></li>
<li>已创建 Azure OpenAI 服务。 请参阅本指南，了解如何<a href="https://learn.microsoft.com/azure/ai-services/openai/how-to/create-resource?pivots=web-portal?WT.mc_id=academic-105485-koreyst">创建资源</a>.</li>
</ul>
<h3 id="api-key-and-endpoint">添加 API key and endpoint<a class="headerlink" href="#api-key-and-endpoint" title="Permanent link">&para;</a></h3>
<p>您需要告诉“openai”库要使用什么 API key。 要查找 API key ，请转到创建好的 Azure Open AI Service 中的 "Keys and Endpoint"部分并复制 "Key 1" 值。</p>
<p><img alt="Keys and Endpoint resource blade in Azure Portal" src="https://learn.microsoft.com/azure/ai-services/openai/media/quickstarts/endpoint.png?WT.mc_id=academic-105485-koreyst" /></p>
<p>复制 Key 后，让我们调用库使用它。</p>
<blockquote>
<p>[!注意]
通过设置环境变量将 API Key 与代码分开是很重要的</p>
<ul>
<li>为您的 API key 中设置 <code>OPENAI_API_KEY</code></li>
<li><code>export OPENAI_API_KEY='sk-...'</code></li>
</ul>
</blockquote>
<h3 id="azure">配置 Azure 环境<a class="headerlink" href="#azure" title="Permanent link">&para;</a></h3>
<p>如果您使用 Azure OpenAI , 请按照以后步骤进行设置</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">openai</span><span class="o">.</span><span class="n">api_type</span> <span class="o">=</span> <span class="s1">&#39;azure&#39;</span>
<span class="n">openai</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;OPENAI_API_KEY&quot;</span><span class="p">]</span>
<span class="n">openai</span><span class="o">.</span><span class="n">api_version</span> <span class="o">=</span> <span class="s1">&#39;2023-05-15&#39;</span>
<span class="n">openai</span><span class="o">.</span><span class="n">api_base</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;API_BASE&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>以上设置的解释</p>
<ul>
<li><code>api_type</code> 为 <code>azure</code>. 这告诉 librarys 使用 Azure Open AI 而不是 OpenAI。</li>
<li><code>api_key</code>, 对应 Azure Portal 中的 API Key</li>
<li><code>api_version</code>, 这是您要使用的 API 版本。 在撰写本文时，最新版本是'2023-05-15'。</li>
<li><code>api_base</code>, 这是 API 的 endpoint 。 您可以在 Azure Portal 中 API Key 下方找到它。</li>
</ul>
<blockquote>
<p>[注意] &gt; <code>os.getenv</code> 是一个读取环境变量的函数。 您可以使用它来读取“OPENAI_API_KEY”和“API_BASE”等环境变量。 在终端中或使用“dotenv”等库设置这些环境变量。</p>
</blockquote>
<h2 id="_9">文字生成<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h2>
<p>生成文本的方法是使用“Completion”类。 这是一个例子：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">prompt</span> <span class="o">=</span> <span class="s2">&quot;Complete the following: Once upon a time there was a&quot;</span>

<span class="n">completion</span> <span class="o">=</span> <span class="n">openai</span><span class="o">.</span><span class="n">Completion</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s2">&quot;davinci-002&quot;</span><span class="p">,</span> <span class="n">prompt</span><span class="o">=</span><span class="n">prompt</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">completion</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>在上面的代码中，我们创建一个 completion 对象并传入我们要使用的模型和提示。 然后我们输出生成的文本。</p>
<h3 id="_10">聊天补全<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<p>到目前为止，您已经了解了我们如何使用“Completion”来生成文本。 但还有另一个更适合聊天机器人的类，称为“ChatCompletion”。 这是例子：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">openai</span>

<span class="n">openai</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s2">&quot;sk-...&quot;</span>

<span class="n">completion</span> <span class="o">=</span> <span class="n">openai</span><span class="o">.</span><span class="n">ChatCompletion</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-3.5-turbo&quot;</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello world&quot;</span><span class="p">}])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">completion</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>下一章将详细介绍此功能。</p>
<h2 id="-">练习 - 您的人生中首个文本生成应用<a class="headerlink" href="#-" title="Permanent link">&para;</a></h2>
<p>现在我们已经了解了如何设置和配置 openai，是时候构建您的第一个文本生成应用程序了。 请按照下列步骤操作：</p>
<ol>
<li>创建虚拟环境并安装 openai：</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>python<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>venv
<span class="nb">source</span><span class="w"> </span>venv/bin/activate
pip<span class="w"> </span>install<span class="w"> </span>openai
</code></pre></div></td></tr></table></div>
<blockquote>
<p>[!注意]
如果您使用的是 Windows，请输入 <code>venv\Scripts\activate</code> 而不是 <code>source venv/bin/activate</code>。</p>
<p>[!注意]
转至 <a href="https://portal.azure.com/?WT.mc_id=academic-105485-koreyst">https://portal.azure.com/</a> 找到您的 Azure Open AI Key ,在资源中搜索“Open AI” <code>并选择“打开 AI 资源”，然后选择</code>Keys and Endpoint<code>并复制</code>Key 1` 值。</p>
</blockquote>
<ol>
<li>创建 <em>app.py</em> 文件并添加以下代码:</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">openai</span>

<span class="n">openai</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s2">&quot;您的 openai key 或 Azure OpenAI key&quot;</span>

<span class="n">openai</span><span class="o">.</span><span class="n">api_type</span> <span class="o">=</span> <span class="s1">&#39;azure&#39;</span>
<span class="n">openai</span><span class="o">.</span><span class="n">api_version</span> <span class="o">=</span> <span class="s1">&#39;2023-05-15&#39;</span>
<span class="n">openai</span><span class="o">.</span><span class="n">api_base</span> <span class="o">=</span> <span class="s2">&quot;您的 Azure OpenAI Endpoint&quot;</span>
<span class="n">deployment_name</span> <span class="o">=</span> <span class="s2">&quot;部署模型的名字&quot;</span>

<span class="c1"># add your completion code</span>
<span class="n">prompt</span> <span class="o">=</span> <span class="s2">&quot;Complete the following: Once upon a time there was a&quot;</span>

<span class="c1"># make completion</span>
<span class="n">completion</span> <span class="o">=</span> <span class="n">openai</span><span class="o">.</span><span class="n">Completion</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">engine</span><span class="o">=</span> <span class="n">deployment_name</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;davinci-002&quot;</span><span class="p">,</span> <span class="n">prompt</span><span class="o">=</span><span class="n">prompt</span><span class="p">)</span>

<span class="c1"># print response</span>
<span class="nb">print</span><span class="p">(</span><span class="n">completion</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<blockquote>
<p>[!注意]
如果您使用的是 Azure Open AI，则需要将 <code>api_type</code> 设置为 <code>azure</code>，并将 <code>api_key</code> 设置为您的 Azure Open AI Key</p>
</blockquote>
<p>您应该看到如下所示的输出结果：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Output</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="go"> very unhappy _____.</span>

<span class="go">Once upon a time there was a very unhappy mermaid.</span>
</code></pre></div></td></tr></table></div>
<h2 id="_11">不同类型的提示，针对不同的事情<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h2>
<p>现在您已经了解了如何使用提示生成文本。 您甚至可以启动并运行一个程序，可以对其进行修改以生成不同类型的文本。</p>
<p>提示可用于各种任务。 例如：</p>
<ul>
<li><strong>生成一种类型的文本</strong>。 例如，生成一首诗、测验题目等。</li>
<li><strong>查找信息</strong>。 您可以使用提示来查找信息，例如以下示例'What does CORS mean in web development?'。</li>
<li><strong>生成代码</strong>。 您可以使用提示来生成代码，例如开发用于验证电子邮件的正则表达式，或者为什么不生成整个程序，例如 web 应用？</li>
</ul>
<h2 id="_12">进阶学习：菜谱生成器<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h2>
<p>想象一下，你家里有食材，你想煮点东西。 为此，你需要一个食谱。 查找食谱的一种方法是使用搜索引擎，或者您可以使用 LLMs 来这样做。</p>
<p>你可以这样写一个提示：</p>
<blockquote>
<p>"Show me 5 recipes for a dish with the following ingredients: chicken, potatoes, and carrots. Per recipe, list all the ingredients used"</p>
</blockquote>
<p>鉴于上述提示，您可能会得到类似于以下结果：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Output</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="go">1. Roasted Chicken and Vegetables:</span>
<span class="go">Ingredients:</span>
<span class="go">- 4 chicken thighs</span>
<span class="go">- 2 potatoes, cut into cubes</span>
<span class="go">- 2 carrots, cut into cubes</span>
<span class="go">- 2 tablespoons olive oil</span>
<span class="go">- 2 cloves garlic, minced</span>
<span class="go">- 1 teaspoon dried thyme</span>
<span class="go">- 1 teaspoon dried oregano</span>
<span class="go">- Salt and pepper, to taste</span>

<span class="go">1. Chicken and Potato Stew:</span>
<span class="go">Ingredients:</span>
<span class="go">- 2 tablespoons olive oil</span>
<span class="go">- 1 onion, diced</span>
<span class="go">- 2 cloves garlic, minced</span>
<span class="go">- 2 chicken breasts, cut into cubes</span>
<span class="go">- 2 potatoes, cut into cubes</span>
<span class="go">- 2 carrots, cut into cubes</span>
<span class="go">- 1 teaspoon dried oregano</span>
<span class="go">- 1 teaspoon dried thyme</span>
<span class="go">- 1 cup chicken broth</span>
<span class="go">- Salt and pepper, to taste</span>

<span class="go">1. Chicken and Potato Bake:</span>
<span class="go">Ingredients:</span>
<span class="go">- 2 tablespoons olive oil</span>
<span class="go">- 2 chicken breasts, cut into cubes</span>
<span class="go">- 2 potatoes, cut into cubes</span>
<span class="go">- 2 carrots, cut into cubes</span>
<span class="go">- 1 onion, diced</span>
<span class="go">- 2 cloves garlic, minced</span>
<span class="go">- 1 teaspoon dried oregano</span>
<span class="go">- 1 teaspoon dried thyme</span>
<span class="go">- 1 cup chicken broth</span>
<span class="go">- Salt and pepper, to taste</span>

<span class="go">1. Chicken and Potato Soup:</span>
<span class="go">Ingredients:</span>
<span class="go">- 2 tablespoons olive oil</span>
<span class="go">- 1 onion, diced</span>
<span class="go">- 2 cloves garlic, minced</span>
<span class="go">- 2 chicken breasts, cut into cubes</span>
<span class="go">- 2 potatoes, cut into cubes</span>
<span class="go">- 2 carrots, cut into cubes</span>
<span class="go">- 1 teaspoon dried oregano</span>
<span class="go">- 1 teaspoon dried thyme</span>
<span class="go">- 4 cups chicken broth</span>
<span class="go">- Salt and pepper, to taste</span>

<span class="go">1. Chicken and Potato Hash:</span>
<span class="go">Ingredients:</span>
<span class="go">- 2 tablespoons olive oil</span>
<span class="go">- 2 chicken breasts, cut into cubes</span>
<span class="go">- 2 potatoes, cut into cubes</span>
<span class="go">- 2 carrots, cut into cubes</span>
<span class="go">- 1 onion, diced</span>
<span class="go">- 2 cloves garlic, minced</span>
<span class="go">- 1 teaspoon dried oregano</span>
</code></pre></div></td></tr></table></div>
<p>结果很好，我知道该怎么做菜了。但希望有更进一步的改进是：</p>
<ul>
<li>过滤掉我不喜欢或过敏的成分。</li>
<li>制作一份购物清单，以防我家里没有所有原料。</li>
</ul>
<p>针对上述情况，我们添加一个额外的提示：</p>
<blockquote>
<p>"Please remove recipes with garlic as I'm allergic and replace it with something else. Also, please produce a shopping list for the recipes, considering I already have chicken, potatoes and carrots at home."</p>
</blockquote>
<p>现在你有了一个新的结果，即：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Output</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="go">1. Roasted Chicken and Vegetables:</span>
<span class="go">Ingredients:</span>
<span class="go">- 4 chicken thighs</span>
<span class="go">- 2 potatoes, cut into cubes</span>
<span class="go">- 2 carrots, cut into cubes</span>
<span class="go">- 2 tablespoons olive oil</span>
<span class="go">- 1 teaspoon dried thyme</span>
<span class="go">- 1 teaspoon dried oregano</span>
<span class="go">- Salt and pepper, to taste</span>

<span class="go">1. Chicken and Potato Stew:</span>
<span class="go">Ingredients:</span>
<span class="go">- 2 tablespoons olive oil</span>
<span class="go">- 1 onion, diced</span>
<span class="go">- 2 chicken breasts, cut into cubes</span>
<span class="go">- 2 potatoes, cut into cubes</span>
<span class="go">- 2 carrots, cut into cubes</span>
<span class="go">- 1 teaspoon dried oregano</span>
<span class="go">- 1 teaspoon dried thyme</span>
<span class="go">- 1 cup chicken broth</span>
<span class="go">- Salt and pepper, to taste</span>

<span class="go">1. Chicken and Potato Bake:</span>
<span class="go">Ingredients:</span>
<span class="go">- 2 tablespoons olive oil</span>
<span class="go">- 2 chicken breasts, cut into cubes</span>
<span class="go">- 2 potatoes, cut into cubes</span>
<span class="go">- 2 carrots, cut into cubes</span>
<span class="go">- 1 onion, diced</span>
<span class="go">- 1 teaspoon dried oregano</span>
<span class="go">- 1 teaspoon dried thyme</span>
<span class="go">- 1 cup chicken broth</span>
<span class="go">- Salt and pepper, to taste</span>

<span class="go">1. Chicken and Potato Soup:</span>
<span class="go">Ingredients:</span>
<span class="go">- 2 tablespoons olive oil</span>
<span class="go">- 1 onion, diced</span>
<span class="go">- 2 chicken breasts, cut into cubes</span>
<span class="go">- 2 potatoes, cut into cubes</span>
<span class="go">- 2 carrots, cut into cubes</span>
<span class="go">- 1 teaspoon dried oregano</span>
<span class="go">- 1 teaspoon dried thyme</span>
<span class="go">- 4 cups chicken broth</span>
<span class="go">- Salt and pepper, to taste</span>

<span class="go">1. Chicken and Potato Hash:</span>
<span class="go">Ingredients:</span>
<span class="go">- 2 tablespoons olive oil</span>
<span class="go">- 2 chicken breasts, cut into cubes</span>
<span class="go">- 2 potatoes, cut into cubes</span>
<span class="go">- 2 carrots, cut into cubes</span>
<span class="go">- 1 onion, diced</span>
<span class="go">- 1 teaspoon dried oregano</span>

<span class="go">Shopping List:</span>
<span class="go">- Olive oil</span>
<span class="go">- Onion</span>
<span class="go">- Thyme</span>
<span class="go">- Oregano</span>
<span class="go">- Salt</span>
<span class="go">- Pepper</span>
</code></pre></div></td></tr></table></div>
<p>That's your five recipes, with no garlic mentioned and you also have a shopping list considering what you already have at home.</p>
<p>这是根据您的购买清单生成你的食谱（不包含大蒜）</p>
<h2 id="-_1">实战 - 打造一个菜谱生成器<a class="headerlink" href="#-_1" title="Permanent link">&para;</a></h2>
<p>根据场景，让我们编写代码来完整代码。为此，请按照下列步骤操作：</p>
<ol>
<li>使用现有的 <em>app.py</em> 文件作为起点</li>
<li>找到 <code>prompt</code> 变量并将其代码更改为以下内容：</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">prompt</span> <span class="o">=</span> <span class="s2">&quot;Show me 5 recipes for a dish with the following ingredients: chicken, potatoes, and carrots. Per recipe, list all the ingredients used&quot;</span>
</code></pre></div></td></tr></table></div>
<p>运行代码，您应该会看到类似以下内容的输出：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Output</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="go">-Chicken Stew with Potatoes and Carrots: 3 tablespoons oil, 1 onion, chopped, 2 cloves garlic, minced, 1 carrot, peeled and chopped, 1 potato, peeled and chopped, 1 bay leaf, 1 thyme sprig, 1/2 teaspoon salt, 1/4 teaspoon black pepper, 1 1/2 cups chicken broth, 1/2 cup dry white wine, 2 tablespoons chopped fresh parsley, 2 tablespoons unsalted butter, 1 1/2 pounds boneless, skinless chicken thighs, cut into 1-inch pieces</span>
<span class="go">-Oven-Roasted Chicken with Potatoes and Carrots: 3 tablespoons extra-virgin olive oil, 1 tablespoon Dijon mustard, 1 tablespoon chopped fresh rosemary, 1 tablespoon chopped fresh thyme, 4 cloves garlic, minced, 1 1/2 pounds small red potatoes, quartered, 1 1/2 pounds carrots, quartered lengthwise, 1/2 teaspoon salt, 1/4 teaspoon black pepper, 1 (4-pound) whole chicken</span>
<span class="go">-Chicken, Potato, and Carrot Casserole: cooking spray, 1 large onion, chopped, 2 cloves garlic, minced, 1 carrot, peeled and shredded, 1 potato, peeled and shredded, 1/2 teaspoon dried thyme leaves, 1/4 teaspoon salt, 1/4 teaspoon black pepper, 2 cups fat-free, low-sodium chicken broth, 1 cup frozen peas, 1/4 cup all-purpose flour, 1 cup 2% reduced-fat milk, 1/4 cup grated Parmesan cheese</span>

<span class="go">-One Pot Chicken and Potato Dinner: 2 tablespoons olive oil, 1 pound boneless, skinless chicken thighs, cut into 1-inch pieces, 1 large onion, chopped, 3 cloves garlic, minced, 1 carrot, peeled and chopped, 1 potato, peeled and chopped, 1 bay leaf, 1 thyme sprig, 1/2 teaspoon salt, 1/4 teaspoon black pepper, 2 cups chicken broth, 1/2 cup dry white wine</span>

<span class="go">-Chicken, Potato, and Carrot Curry: 1 tablespoon vegetable oil, 1 large onion, chopped, 2 cloves garlic, minced, 1 carrot, peeled and chopped, 1 potato, peeled and chopped, 1 teaspoon ground coriander, 1 teaspoon ground cumin, 1/2 teaspoon ground turmeric, 1/2 teaspoon ground ginger, 1/4 teaspoon cayenne pepper, 2 cups chicken broth, 1/2 cup dry white wine, 1 (15-ounce) can chickpeas, drained and rinsed, 1/2 cup raisins, 1/2 cup chopped fresh cilantro</span>
</code></pre></div></td></tr></table></div>
<blockquote>
<p>NOTE, your LLM is nondeterministic, so you might get different results every time you run the program.</p>
</blockquote>
<p>Great, let's see how we can improve things. To improve things, we want to make sure the code is flexible, so ingredients and number of recipes can be improved and changed.</p>
<ol>
<li>让我们按以下方式更改代码：</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">no_recipes</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;No of recipes (for example, 5: &quot;</span><span class="p">)</span>

<span class="n">ingredients</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;List of ingredients (for example, chicken, potatoes, and carrots: &quot;</span><span class="p">)</span>

<span class="c1"># interpolate the number of recipes into the prompt an ingredients</span>
<span class="n">prompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Show me </span><span class="si">{</span><span class="n">no_recipes</span><span class="si">}</span><span class="s2"> recipes for a dish with the following ingredients: </span><span class="si">{</span><span class="n">ingredients</span><span class="si">}</span><span class="s2">. Per recipe, list all the ingredients used&quot;</span>
</code></pre></div></td></tr></table></div>
<p>Taking the code for a test run, could look like this:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Output</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="go">No of recipes (for example, 5: 3</span>
<span class="go">List of ingredients (for example, chicken, potatoes, and carrots: milk,strawberries</span>

<span class="go">-Strawberry milk shake: milk, strawberries, sugar, vanilla extract, ice cubes</span>
<span class="go">-Strawberry shortcake: milk, flour, baking powder, sugar, salt, unsalted butter, strawberries, whipped cream</span>
<span class="go">-Strawberry milk: milk, strawberries, sugar, vanilla extract</span>
</code></pre></div></td></tr></table></div>
<h3 id="_13">通过添加过滤器和购物清单进行改进<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h3>
<p>我们现在有一个能够生成食谱的应用，并且它使用很方便，基于用户的输入和食谱的数量所使用的成分。</p>
<p>为了进一步改进它，添加以下内容：</p>
<ul>
<li><strong>过滤掉成分</strong>。 我们希望能够过滤掉我们不喜欢或过敏的成分。 要完成此更改，我们可以编辑现有提示并在其末尾添加过滤条件，如下所示：</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">filter</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Filter (for example, vegetarian, vegan, or gluten-free: &quot;</span><span class="p">)</span>

<span class="n">prompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Show me </span><span class="si">{</span><span class="n">no_recipes</span><span class="si">}</span><span class="s2"> recipes for a dish with the following ingredients: </span><span class="si">{</span><span class="n">ingredients</span><span class="si">}</span><span class="s2">. Per recipe, list all the ingredients used, no </span><span class="si">{</span><span class="nb">filter</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
<p>上面代码中，我们在提示语末尾添加了 {filter}，并让用户输入过滤值。</p>
<p>现在运行程序的输入示例如下</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Output</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="go">No of recipes (for example, 5: 3</span>
<span class="go">List of ingredients (for example, chicken, potatoes, and carrots: onion,milk</span>
<span class="go">Filter (for example, vegetarian, vegan, or gluten-free: no milk</span>

<span class="go">1. French Onion Soup</span>

<span class="go">Ingredients:</span>

<span class="go">-1 large onion, sliced</span>
<span class="go">-3 cups beef broth</span>
<span class="go">-1 cup milk</span>
<span class="go">-6 slices french bread</span>
<span class="go">-1/4 cup shredded Parmesan cheese</span>
<span class="go">-1 tablespoon butter</span>
<span class="go">-1 teaspoon dried thyme</span>
<span class="go">-1/4 teaspoon salt</span>
<span class="go">-1/4 teaspoon black pepper</span>

<span class="go">Instructions:</span>

<span class="go">2. In a large pot, sauté onions in butter until golden brown.</span>
<span class="go">3. Add beef broth, milk, thyme, salt, and pepper. Bring to a boil.</span>
<span class="go">4. Reduce heat and simmer for 10 minutes.</span>
<span class="go">5. Place french bread slices on soup bowls.</span>
<span class="go">6. Ladle soup over bread.</span>
<span class="go">7. Sprinkle with Parmesan cheese.</span>

<span class="go">8. Onion and Potato Soup</span>

<span class="go">Ingredients:</span>

<span class="go">-1 large onion, chopped</span>
<span class="go">-2 cups potatoes, diced</span>
<span class="go">-3 cups vegetable broth</span>
<span class="go">-1 cup milk</span>
<span class="go">-1/4 teaspoon black pepper</span>

<span class="go">Instructions:</span>

<span class="go">9. In a large pot, sauté onions in butter until golden brown.</span>
<span class="go">10. Add potatoes, vegetable broth, milk, and pepper. Bring to a boil.</span>
<span class="go">11. Reduce heat and simmer for 10 minutes.</span>
<span class="go">12. Serve hot.</span>

<span class="go">13. Creamy Onion Soup</span>

<span class="go">Ingredients:</span>

<span class="go">-1 large onion, chopped</span>
<span class="go">-3 cups vegetable broth</span>
<span class="go">-1 cup milk</span>
<span class="go">-1/4 teaspoon black pepper</span>
<span class="go">-1/4 cup all-purpose flour</span>
<span class="go">-1/2 cup shredded Parmesan cheese</span>

<span class="go">Instructions:</span>

<span class="go">14. In a large pot, sauté onions in butter until golden brown.</span>
<span class="go">15. Add vegetable broth, milk, and pepper. Bring to a boil.</span>
<span class="go">16. Reduce heat and simmer for 10 minutes.</span>
<span class="go">17. In a small bowl, whisk together flour and Parmesan cheese until smooth.</span>
<span class="go">18. Add to soup and simmer for an additional 5 minutes, or until soup has thickened.</span>
</code></pre></div></td></tr></table></div>
<p>正如您所看到的，任何含有牛奶的食谱都已被过滤掉。 但是，如果您患有乳糖不耐症，您可能也想过滤掉含有奶酪的食谱，因此有必要明确一下。</p>
<ul>
<li><strong>制作购物清单</strong>。 我们想根据家里已有的物品制定一份购物清单。</li>
</ul>
<p>对于此功能，我们可以尝试在一个提示中解决所有问题，也可以将其分成两个提示。 让我们尝试一下后一种方法。 在这里，我们建议添加一个额外的提示，但为了使其起作用，我们需要将前一个提示的结果作为上下文添加到后一个提示中。</p>
<p>找到代码中打印第一个提示结果的部分，并添加以下代码：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">old_prompt_result</span> <span class="o">=</span> <span class="n">completion</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
<span class="n">prompt</span> <span class="o">=</span> <span class="s2">&quot;Produce a shopping list for the generated recipes and please don&#39;t include ingredients that I already have.&quot;</span>

<span class="n">new_prompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">old_prompt_result</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">prompt</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="n">completion</span> <span class="o">=</span> <span class="n">openai</span><span class="o">.</span><span class="n">Completion</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">engine</span><span class="o">=</span><span class="n">deployment_name</span><span class="p">,</span> <span class="n">prompt</span><span class="o">=</span><span class="n">new_prompt</span><span class="p">,</span> <span class="n">max_tokens</span><span class="o">=</span><span class="mi">1200</span><span class="p">)</span>

<span class="c1"># print response</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Shopping list:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">completion</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>请注意以下事项：</p>
<ol>
<li>
<p>我们通过将第一个提示的结果添加到新提示来构造一个新提示</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">new_prompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">old_prompt_result</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">prompt</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
</li>
<li>
<p>我们提出一个新的请求，但也考虑到我们在第一个提示中请求的 token 数量，所以这次我们设置 <code>max_tokens</code> 是 1200。</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">completion</span> <span class="o">=</span> <span class="n">openai</span><span class="o">.</span><span class="n">Completion</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">engine</span><span class="o">=</span><span class="n">deployment_name</span><span class="p">,</span> <span class="n">prompt</span><span class="o">=</span><span class="n">new_prompt</span><span class="p">,</span> <span class="n">max_tokens</span><span class="o">=</span><span class="mi">1200</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>运行代码，结果如下：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Output</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="go">No of recipes (for example, 5: 2</span>
<span class="go">List of ingredients (for example, chicken, potatoes, and carrots: apple,flour</span>
<span class="go">Filter (for example, vegetarian, vegan, or gluten-free: sugar</span>
<span class="go">Recipes:</span>
<span class="go"> or milk.</span>

<span class="go">-Apple and flour pancakes: 1 cup flour, 1/2 tsp baking powder, 1/2 tsp baking soda, 1/4 tsp salt, 1 tbsp sugar, 1 egg, 1 cup buttermilk or sour milk, 1/4 cup melted butter, 1 Granny Smith apple, peeled and grated</span>
<span class="go">-Apple fritters: 1-1/2 cups flour, 1 tsp baking powder, 1/4 tsp salt, 1/4 tsp baking soda, 1/4 tsp nutmeg, 1/4 tsp cinnamon, 1/4 tsp allspice, 1/4 cup sugar, 1/4 cup vegetable shortening, 1/4 cup milk, 1 egg, 2 cups shredded, peeled apples</span>
<span class="go">Shopping list:</span>
<span class="go"> -Flour, baking powder, baking soda, salt, sugar, egg, buttermilk, butter, apple, nutmeg, cinnamon, allspice</span>
</code></pre></div></td></tr></table></div>
</li>
</ol>
<h2 id="_14">改进您的设置<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h2>
<p>到目前为止，我们拥有的是可以运行的代码，但是我们应该做一些调整来进一步改进。 我们应该做的一些事情是：</p>
<ul>
<li>
<p><strong>将 Key 与代码分开</strong>，例如 API Key。Key 不属于代码，应存储在安全的位置。 为了将 Key 与代码分开，我们可以使用环境变量和像<code>python-dotenv</code> 这样的库去从文件中加载它们。 代码如下：</p>
</li>
<li>
<p>创建一个包含以下内容的 <code>.env</code> 文件：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nv">OPENAI_API_KEY</span><span class="o">=</span>sk-...
</code></pre></div></td></tr></table></div>
<blockquote>
<p>注意，对于 Azure，需要设置以下环境变量:</p>
</blockquote>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nv">OPENAI_API_TYPE</span><span class="o">=</span>azure
<span class="nv">OPENAI_API_VERSION</span><span class="o">=</span><span class="m">2023</span>-05-15
<span class="nv">OPENAI_API_BASE</span><span class="o">=</span>&lt;replace&gt;
</code></pre></div></td></tr></table></div>
<p>在代码中，您可以这样加载环境变量:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">dotenv</span> <span class="kn">import</span> <span class="n">load_dotenv</span>

<span class="n">load_dotenv</span><span class="p">()</span>

<span class="n">openai</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;OPENAI_API_KEY&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
</li>
<li>
<p><strong>关于 token 长度</strong>。 我们应该考虑需要多少 token 来生成我们想要的文本。 token 需要花钱，因此在可能的情况下，我们应该尽量节约使用 token 的数量。 例如，我们可以对提示进行调整，以便我们可以使用更少的 token</p>
</li>
</ul>
<p>要更改使用的 token，您可以使用 <code>max_tokens</code> 参数。 例如，如果您想使用 100 个 token，您可以这样做：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">completion</span> <span class="o">=</span> <span class="n">openai</span><span class="o">.</span><span class="n">Completion</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s2">&quot;davinci-002&quot;</span><span class="p">,</span> <span class="n">prompt</span><span class="o">=</span><span class="n">prompt</span><span class="p">,</span> <span class="n">max_tokens</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p><strong>进行 temperature 调整试验</strong>。 temperature 是我们到目前为止还没有提到的东西，但它是我们的程序如何执行的重要元素。 temperature 值越高，输出就越随机。 相反， temperature 值越低，输出就越可预测。 考虑一下您是否希望输出有所变化。</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>要改变 temperature ，您可以使用 `temperature` 参数。 例如，如果您想使用 0.5 的 temperature ，您可以这样做：

```python
completion = openai.Completion.create(model=&quot;davinci-002&quot;, prompt=prompt, temperature=0.5)
```
</code></pre></div></td></tr></table></div>
<blockquote>
<p>请注意，越接近 1.0，输出的变化就越多。</p>
</blockquote>
<h2 id="_15">作业<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h2>
<p>对于此作业，选择要构建的内容。</p>
<p>以下是一些建议：</p>
<ul>
<li>调整食谱生成器应用程序以进一步改进它。 尝试一下温度值和提示，看看你能想出什么。</li>
<li>建立一个“学习伙伴”。 这个应用程序应该能够回答有关某个主题（例如 Python）的问题，您可能会收到诸如“Python 中的某个主题是什么？”之类的提示，或者您可能会收到一个提示，显示某个主题的代码等。</li>
<li>历史机器人，让历史变得生动起来，指导机器人扮演某个历史人物，并向其询问有关其生活和时代的问题。</li>
</ul>
<h2 id="_16">解决方案<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h2>
<h3 id="_17">学习伙伴<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h3>
<p>下面是一个基础提示，看看如何使用它并根据自己的喜好进行调整。</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code>- &quot;You&#39;re an expert on the Python language

    Suggest a beginner lesson for Python in the following format:

    Format:
    - concepts:
    - brief explanation of the lesson:
    - exercise in code with solutions&quot;
</code></pre></div></td></tr></table></div>
<h3 id="_18">历史机器人<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h3>
<p>以下是您可能会使用的一些提示：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>- &quot;You are Abe Lincoln, tell me about yourself in 3 sentences, and respond using grammar and words like Abe would have used&quot;
- &quot;You are Abe Lincoln, respond using grammar and words like Abe would have used:

   Tell me about your greatest accomplishments, in 300 words:&quot;
</code></pre></div></td></tr></table></div>
<h2 id="_19">知识检查<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h2>
<p>temperature 有什么作用？</p>
<ol>
<li>它控制输出的随机程度。</li>
<li>它控制响应的大小。</li>
<li>它控制使用多少 tokens 。</li>
</ol>
<p>A: 1</p>
<h2 id="_20">🚀 知识拓展<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h2>
<p>完成作业时，尝试改变 temperature ，尝试将其设置为 0、0.5 和 1。请记住，0 是变化最少的，1 是变化最多的，看看什么值最适合您的应用？</p>
<h2 id="_21">继续学习<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h2>
<p>想要了解有关创建文本生成应用的更多信息？ 转至<a href="https://aka.ms/genai-collection?WT.mc_id=academic-105485-koreyst">进阶学习的页面</a> 查找有关此主章节的其他学习资源。</p>
<p>前往第七章，我们将学习<a href="../../../07-building-chat-applications/translations/cn/?WT.mc_id=academic-105485-koreyst">构建聊天应用程序</a></p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 - present Microsoft

    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant", "navigation.expand", "navigation.instant.progress", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.path", "navigation.top", "toc.follow", "navigation.footer", "content.code.copy", "content.tabs.link"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>